!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Pattern={})}(this,(function(t){"use strict";function e(t){return/^(?:https?|ftp):\/\//i.test(t)?t:/^\/\//i.test(t)?"http:"+t:t?"http://"+t:""}function n(t,e,n){return{type:e.type,text:t[0],data:n}}var r={type:"highlight",pattern:/<(\w+)>([^<]+)<\/\1>/,parse:function(t){return n(t,r,{tag:t[1].toLowerCase(),text:t[2]})}},a={type:"image",pattern:/<img[^>]*>/i,parse:function(t){var r=t[0].match(/src=(['"])([^'"]+)\1/i);return n(t,a,{url:r?e(r[2]):""})}},i={type:"email",pattern:/(?:[\w!#$%&'*+/=?^`{|}~-]+(?:\.[\w!#$%&'*+/=?^`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i,parse:function(t){return n(t,i,{email:t[0]})}},p={type:"url",pattern:/(?:(?:https?|ftp):\/\/)?(www\.)?[-\w@:%.\+~#=]{1,256}\.[a-z0-9()]{1,6}\b([-\w()@:%\+.~#?&//=]*)/i,parse:function(t){var r=t[0],a=r.match(i.pattern);return a&&a[0]===r?i.parse(a):/^(\d+)?\.\d+/.test(r)?void 0:n(t,p,{url:e(r)})}},x={type:"tel",pattern:/(\+\d{2,5}\-)?(\d{2,4}\-)?\d{6,16}/,parse:function(t){return n(t,x,{tel:t[0]})}};var f=[],u={};function o(t){u[t.type]||(u[t.type]=t,f.push(t))}o(r),o(a),o(i),o(p),o(x),t.addPattern=o,t.parseText=function(t,e){void 0===e&&(e=f);for(var n=[],r=function(){var r=void 0,a=void 0;e.forEach((function(e){var n=e.pattern.exec(t);n&&(r?n.index<r.index&&(r=n,a=e):(r=n,a=e))}));var i=function(t){var e=n[n.length-1];e&&"text"===e.type?e.text+=t:n.push({type:"text",text:t})};if(!r||!a)return t.length&&i(t),"break";r.index>0&&i(t.substring(0,r.index));var p=a.parse(r);p?n.push(p):i(r[0]),t=t.substring(r.index+r[0].length)};;){if("break"===r())break}return n},t.patternList=f,t.patternMap=u,t.testPattern=function(t,e){var n=t.match(e.pattern);if(n){var r=e.parse(n);if(r)return r.type===e.type}return!1},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=pattern.min.js.map
