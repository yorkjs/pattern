!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Pattern={})}(this,(function(t){"use strict";function e(t){return/^(?:https?|ftp):\/\//i.test(t)?t:/^\/\//i.test(t)?"http:"+t:t?"http://"+t:""}function n(t,e,n){return{type:e.type,text:t[0],data:n}}var r={type:"highlight",pattern:/<(\w+)>([^<]+)<\/\1>/,parse:function(t){return n(t,r,{tag:t[1].toLowerCase(),text:t[2]})}},a={type:"image",pattern:/<img[^>]*>/i,parse:function(t){var r=t[0].match(/src=(['"])([^'"]+)\1/i);return n(t,a,{url:r?e(r[2]):""})}},p={type:"email",pattern:/(?:[\w!#$%&'*+/=?^`{|}~-]+(?:\.[\w!#$%&'*+/=?^`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i,parse:function(t){return n(t,p,{email:t[0]})}},i={type:"url",pattern:/(?:(?:https?|ftp):\/\/)?(www\.)?[-\w@:%.\+~#=]{1,256}\.[a-z0-9()]{1,6}\b([-\w()@:%\+.~#?&//=]*)/i,parse:function(t){var r=t[0],a=r.match(p.pattern);return a&&a[0]===r?p.parse(a):n(t,i,{url:e(r)})}},x={type:"tel",pattern:/(\+\d{2,5}\-)?(\d{2,4}\-)?\d{6,16}/,parse:function(t){return n(t,x,{tel:t[0]})}};var u=[],f={};function o(t){f[t.type]||(f[t.type]=t,u.push(t))}o(r),o(a),o(p),o(i),o(x),t.addPattern=o,t.parseText=function(t,e){void 0===e&&(e=u);for(var n=[],r=function(){var r=void 0,a=void 0;if(e.forEach((function(e){var n=e.pattern.exec(t);n&&(r?n.index<r.index&&(r=n,a=e):(r=n,a=e))})),!r||!a)return t.length&&n.push({type:"text",text:t}),"break";r.index>0&&n.push({type:"text",text:t.substring(0,r.index)}),n.push(a.parse(r)),t=t.substring(r.index+r[0].length)};;){if("break"===r())break}return n},t.patternList=u,t.patternMap=f,t.testPattern=function(t,e){var n=t.match(e.pattern);return!!n&&e.parse(n).type===e.type},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=pattern.min.js.map
