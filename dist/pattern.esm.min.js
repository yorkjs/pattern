function t(t){return/^(?:https?|ftp):\/\//i.test(t)?t:/^\/\//i.test(t)?"http:"+t:t?"http://"+t:""}function e(t,e,n){return{type:e.type,text:t[0],data:n}}const n={type:"highlight",pattern:/<(\w+)>([^<]+)<\/\1>/,parse:t=>e(t,n,{tag:t[1].toLowerCase(),text:t[2]})},x={type:"image",pattern:/<img[^>]*>/i,parse(n){const r=n[0].match(/src=(['"])([^'"]+)\1/i);return e(n,x,{url:r?t(r[2]):""})}},r={type:"email",pattern:/(?:[\w!#$%&'*+/=?^`{|}~-]+(?:\.[\w!#$%&'*+/=?^`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i,parse:t=>e(t,r,{email:t[0]})},p={type:"url",pattern:/(?:(?:https?|ftp):\/\/)?(www\.)?[-\w@:%.\+~#=]{1,256}\.[a-z0-9()]{1,6}\b([-\w()@:%\+.~#?&//=]*)/i,parse(n){const x=n[0],a=x.match(r.pattern);return a&&a[0]===x?r.parse(a):/^(\d+)?\.\d+$/.test(x)?void 0:e(n,p,{url:t(x)})}},a={type:"tel",pattern:/(\+\d{2,5}\-)?(\d{2,4}\-)?\d{6,16}/,parse:t=>e(t,a,{tel:t[0]})};function s(t,e){const n=t.match(e.pattern);if(n){const t=e.parse(n);if(t)return t.type===e.type}return!1}const i=[],c={};function o(t){c[t.type]||(c[t.type]=t,i.push(t))}function u(t,e=i){const n=[];for(;;){let x,r;e.forEach((function(e){const n=e.pattern.exec(t);n&&(x?n.index<x.index&&(x=n,r=e):(x=n,r=e))}));const p=function(t){const e=n[n.length-1];e&&"text"===e.type?e.text+=t:n.push({type:"text",text:t})};if(!x||!r){t.length&&p(t);break}{x.index>0&&p(t.substring(0,x.index));const e=r.parse(x);e?n.push(e):p(x[0]),t=t.substring(x.index+x[0].length)}}return n}o(n),o(x),o(r),o(p),o(a);export{o as addPattern,u as parseText,i as patternList,c as patternMap,s as testPattern};
//# sourceMappingURL=pattern.esm.min.js.map
