function t(t){return/^(?:https?|ftp):\/\//i.test(t)?t:/^\/\//i.test(t)?"http:"+t:t?"http://"+t:""}function e(t,e,x){return{type:e.type,text:t[0],data:x}}const x={type:"highlight",pattern:/<(\w+)>([^<]+)<\/\1>/,parse:t=>e(t,x,{tag:t[1].toLowerCase(),text:t[2]})},n={type:"image",pattern:/<img[^>]*>/i,parse(x){const p=x[0].match(/src=(['"])([^'"]+)\1/i);return e(x,n,{url:p?t(p[2]):""})}},p={type:"email",pattern:/(?:[\w!#$%&'*+/=?^`{|}~-]+(?:\.[\w!#$%&'*+/=?^`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i,parse:t=>e(t,p,{email:t[0]})},r={type:"url",pattern:/(?:(?:https?|ftp):\/\/)?(www\.)?[-\w@:%.\+~#=]{1,256}\.[a-z0-9()]{1,6}\b([-\w()@:%\+.~#?&//=]*)/i,parse(x){const n=x[0],a=n.match(p.pattern);return a&&a[0]===n?p.parse(a):e(x,r,{url:t(n)})}},a={type:"tel",pattern:/(\+\d{2,5}\-)?(\d{2,4}\-)?\d{6,16}/,parse:t=>e(t,a,{tel:t[0]})};function s(t,e){const x=t.match(e.pattern);return!!x&&e.parse(x).type===e.type}const i=[],c={};function u(t){c[t.type]||(c[t.type]=t,i.push(t))}function o(t,e=i){const x=[];for(;;){let n,p;if(e.forEach((function(e){const x=e.pattern.exec(t);x&&(n?x.index<n.index&&(n=x,p=e):(n=x,p=e))})),!n||!p){t.length&&x.push({type:"text",text:t});break}n.index>0&&x.push({type:"text",text:t.substring(0,n.index)}),x.push(p.parse(n)),t=t.substring(n.index+n[0].length)}return x}u(x),u(n),u(p),u(r),u(a);export{u as addPattern,o as parseText,i as patternList,c as patternMap,s as testPattern};
//# sourceMappingURL=pattern.esm.min.js.map
